{% load static %}
{% load widget_tweaks %}

<!Doctype html>
<html class="no-js" lang="zxx">

<head>
    <title>Loans &mdash; Amju</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://loans.amjuuniquemfbng.com/cdn/amju-loan/fonts/icomoon/style.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/89122a8218.css">

    <link rel="stylesheet" href="https://loans.amjuuniquemfbng.com/cdn/amju-loan/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://loans.amjuuniquemfbng.com/cdn/amju-loan/css/jquery-ui.css">
    <link rel="stylesheet" href="https://loans.amjuuniquemfbng.com/cdn/amju-loan/css/owl.carousel.min.css">
    <link rel="stylesheet" href="https://loans.amjuuniquemfbng.com/cdn/amju-loan/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="https://loans.amjuuniquemfbng.com/cdn/amju-loan/css/owl.theme.default.min.css">

    <link rel="stylesheet" href="https://loans.amjuuniquemfbng.com/cdn/amju-loan/css/jquery.fancybox.min.css">

    <link rel="stylesheet" href="https://loans.amjuuniquemfbng.com/cdn/amju-loan/css/bootstrap-datepicker.css">

    <link rel="stylesheet" href="https://loans.amjuuniquemfbng.com/cdn/amju-loan/fonts/flaticon/font/flaticon.css">

    <link rel="stylesheet" href="https://loans.amjuuniquemfbng.com/cdn/amju-loan/css/aos.css">

    <link rel="stylesheet" href="https://loans.amjuuniquemfbng.com/cdn/amju-loan/css/style.css">

      <!-- daterange picker -->
  <link rel="stylesheet" href="https://cdn.minloans.com.ng/min-dash/plugins/daterangepicker/daterangepicker.css">
  <!-- iCheck for checkboxes and radio inputs -->
  <link rel="stylesheet" href="https://cdn.minloans.com.ng/min-dash/plugins/icheck-bootstrap/icheck-bootstrap.min.css">
  <!-- Bootstrap Color Picker -->
  <link rel="stylesheet" href="https://cdn.minloans.com.ng/min-dash/plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css">
  <!-- Tempusdominus Bbootstrap 4 -->
  <link rel="stylesheet" href="https://cdn.minloans.com.ng/min-dash/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
  <!-- Select2 -->
  <link rel="stylesheet" href="https://cdn.minloans.com.ng/min-dash/plugins/select2/css/select2.min.css">
  <link rel="stylesheet" href="https://cdn.minloans.com.ng/min-dash/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">
  <!-- Bootstrap4 Duallistbox -->
  <link rel="stylesheet" href="https://cdn.minloans.com.ng/min-dash/plugins/bootstrap4-duallistbox/bootstrap-duallistbox.min.css">

  </head>

<body>

    {% include 'nav/home-nav.html' %}

    <div class="site-section cta-big-image" id="about-section">
      <div class="container">
        <div class="row mb-5 justify-content-center">
          <div class="col-md-8 text-center">
            <h2 class="section-title mb-3" data-aos="fade-up" data-aos-delay="">Hi, {{ request.user.profile.get_name }}</h2>
            <p class="lead" data-aos="fade-up" data-aos-delay="100">
              {% if request.user.profile.borrower.bank %}
                <img src="{{request.user.profile.borrower.get_image}}" class="rounded-circle img-thumbnail mx-auto d-block" id="borrowerImage" width="100px" height="100px" alt="{{request.user.get_name}} Profile Image">
                <div class="form-group">
                    <label for="">Update My Image</label>
                    <div class="input-group">
                      <div class="custom-file">
                        <input type="image" class="custom-file-input" id="uploadPortal">
                        <label class="custom-file-label" for="">Choose file</label>
                      </div>
                      <div class="input-group-append">
                        <span class="input-group-text">Upload</span>
                      </div>
                    </div>
                  </div>
                <div class="jumbotron">
                  <h1>{{object.get_name}} <i class="fa fa-check-circle" style="color: #5cb85c;"></i> </h1>
                  <p>
                    <a href="tel:{{borrower.land_line}}">
                        <i class="fa fa-phone"></i> {{borrower.land_line}}
                    </a><br/>
                    <strong>{{borrower.working_status}}</strong>
                    <div>{{borrower.business_name}}</div>
                    <div><i class="fa fa-phone-square"></i> {{borrower.land_line}}</div>
                    <div><i class="fa fa-envelope"></i> {{borrower.email}}</div>
                  </p>
                </div>
                <div class="card">
                  <div class="card-header">Account Details</div>
                  <div class="card-body">
                      Gender: {{borrower.gender}}<br/>
                      Address: {{borrower.get_address}}<br/>
                      SSN/ID: {{borrower.unique_identifier}}<br/>
                      Bank: {{borrower.bank}}<br/>
                      Account Number: {{borrower.account_number}}<br/>
                      BVN: {{borrower.bvn}}<br/>
                      Age: {{borrower.get_age}} yrs old<br/>
                  </div>
                  <div class="card-footer">
                      <i class="fa fa-arrow-left"></i> <a href="/account/profile/{{request.user.profile.slug}}/">Back To Dashoard</a>
                  </div>
                </div>

              {% else %}
                <img src="{{request.user.profile.borrower.get_image}}" class="rounded-circle img-thumbnail mx-auto d-block" id="borrowerImage" width="100px" height="100px" alt="{{request.user.get_name}} Profile Image">
                <div class="form-group">
                    <label for="">Update My Image</label>
                    <div class="input-group">
                      <div class="custom-file">
                        <input type="image" class="custom-file-input" id="uploadPortalNew">
                        <label class="custom-file-label" for="">Choose file</label>
                      </div>
                      <div class="input-group-append">
                        <span class="input-group-text">Upload</span>
                      </div>
                    </div>
                  </div>

                <form class="form-group addRequestBorrowerForm" method="post" action="/account/profile/{{request.user.profile.slug}}/borrower-create/" enctype="multipart/form-data" role="form">
                {% csrf_token %}
                <div class="card card-info">
                  <div class="card-header">
                    <h3 class="card-title">Complete My Profile</h3>
                  </div>
                  <div class="card-body">

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fas fa-user-md"></i> </span>
                        </div>
                        <select class="form-control" id="title" required>
                          <option value="Mr">Mr</option>
                          <option value="Mrs">Mrs</option>
                          <option value="Master">Master</option>
                          <option value="Miss">Miss</option>
                        </select>
                    </div>

                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-user"></i> </span>
                      </div>
                      <input type="text" class="form-control" id="first_name" placeholder="First Name" value="{{first_name}}" required>
                    </div>

                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-user"></i> </span>
                      </div>
                      <input type="text" class="form-control" id="last_name" placeholder="Last Name" value="{{last_name}}" required>
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">GENDER </span>
                        </div>
                        <select class="form-control" id="gender" required>
                          <option value="Male">Male</option>
                          <option value="Female">Female</option>
                        </select>
                    </div>

                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-phone-square"></i> </span>
                      </div>
                      <input type="text" class="form-control" id="landline" placeholder="+23480XXXXXXXX">
                    </div>

                    <div class="input-group mb-3">
                      <input type="text" class="form-control" id="business_name" placeholder="Business/Company Name" required>
                      <div class="input-group-append">
                        <span class="input-group-text"><i class="fas fa-check"></i></span>
                      </div>
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Working Status</span>
                        </div>
                        <select class="form-control" id="working_status" required>
                          <option value="Employed">Employed</option>
                          <option value="Unemployed">Unemployed</option>
                          <option value="Self-Employed">Self-employed</option>
                        </select>
                    </div>

                    <div class="input-group mb-3">
                      <input type="text" class="form-control" id="unique_identifier" placeholder="ID Card Number, INT'L Passport, SSN / Card Unique Number" required>
                      <div class="input-group-append">
                        <span class="input-group-text">SSN</span>
                      </div>
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Bank</span>
                        </div>
                        <select class="form-control" id="bank_codes" required>
                          {% for bank in banks %}
                            <option value="{{ bank }}">{{ bank }}</option>
                          {% endfor %}
                        </select>
                    </div>

                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-credit-card"></i> </span>
                      </div>
                      <input type="text" class="form-control" id="account_number" placeholder="Account Number" required>
                      <div class="input-group-append">
                        <span class="input-group-text">NN </span>
                      </div>
                    </div>

                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text">BVN </span>
                      </div>
                      <input type="text" class="form-control" id="bvn" placeholder="Bank Verification Number" required>
                      <div class="input-group-append">
                        <span class="input-group-text">BVN </span>
                      </div>
                    </div>

                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text">Card Number </span>
                      </div>
                      <input type="text" class="form-control" id="card-digits" placeholder="Card Digits" required>
                      <div class="input-group-append">
                        <span class="input-group-text">Card Num </span>
                      </div>
                    </div>

                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text">Expiry Month </span>
                      </div>
                      <input type="text" class="form-control" id="expiry-month" placeholder="MM" required>
                      <div class="input-group-append">
                        <span class="input-group-text">Expiry Month </span>
                      </div>
                    </div>

                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text">Expiry Year </span>
                      </div>
                      <input type="text" class="form-control" id="expiry-year" placeholder="YYYY" required>
                      <div class="input-group-append">
                        <span class="input-group-text">Expiry Year </span>
                      </div>
                    </div>

                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text">CVV </span>
                      </div>
                      <input type="text" class="form-control" id="cvv" placeholder="Last 3 Digits At The Back" required>
                      <div class="input-group-append">
                        <span class="input-group-text">CVV </span>
                      </div>
                    </div>

                    <div class="input-group mb-3 date" data-provide="datepicker">
                      <div class="input-group-prepend">
                        <span class="input-group-text">Date Of Birth </span>
                      </div>
                      <input type="text" class="form-control" name="birthday" id="date_of_birth" placeholder="Date Of Birth" required>
                    </div>

                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text">Address </span>
                      </div>
                      <input type="text" class="form-control" id="address" placeholder="Block 27, Alpha Building Street" required>
                      <div class="input-group-append">
                        <span class="input-group-text">Address </span>
                      </div>
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Country</span>
                        </div>
                        <select class="form-control" id="country" required>
                          {% for country in country_qs %}
                            <option value="{{ country.code }}">{{ country.name }}</option>
                          {% endfor %}
                        </select>
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">State</span>
                        </div>
                        <input type="text" class="form-control" id="state" placeholder="System Would Re-validate The State Data" required>
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">L.G.A</span>
                        </div>
                        <input type="text" class="form-control" id="lga" placeholder="Amju Validates Data Input Based On References Above" required>
                    </div>

                  </div>
                  <!-- /.card-body -->
                  <div class="card-footer">
                      <button type="submit" class="btn btn-primary btn-block">
                          <i class="fas fa-plus"></i> Complete My Profile
                      </button>
                  </div>
                </div>
            </form>
              {% endif %}
            </p>
          </div>
        </div>
      </div>
    </div>

    {% include 'footer/home-footer.html' %}

    <script src="https://loans.amjuuniquemfbng.com/cdn/amju-loan/js/jquery-3.3.1.min.js"></script>
    <script src="https://loans.amjuuniquemfbng.com/cdn/amju-loan/js/jquery-ui.js"></script>
    <script src="https://loans.amjuuniquemfbng.com/cdn/amju-loan/js/popper.min.js"></script>
    <script src="https://loans.amjuuniquemfbng.com/cdn/amju-loan/js/bootstrap.min.js"></script>
    <script src="https://loans.amjuuniquemfbng.com/cdn/amju-loan/js/owl.carousel.min.js"></script>
    <script src="https://loans.amjuuniquemfbng.com/cdn/amju-loan/js/jquery.countdown.min.js"></script>
    <script src="https://loans.amjuuniquemfbng.com/cdn/amju-loan/js/jquery.easing.1.3.js"></script>
    <script src="https://loans.amjuuniquemfbng.com/cdn/amju-loan/js/aos.js"></script>
    <script src="https://loans.amjuuniquemfbng.com/cdn/amju-loan/js/jquery.fancybox.min.js"></script>
    <script src="https://loans.amjuuniquemfbng.com/cdn/amju-loan/js/jquery.sticky.js"></script>
    <script src="https://loans.amjuuniquemfbng.com/cdn/amju-loan/js/isotope.pkgd.min.js"></script>
    <script src="https://loans.amjuuniquemfbng.com/cdn/amju-loan/js/main.js"></script>

    <!-- jQuery -->
<script src="https://cdn.minloans.com.ng/min-dash/plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="https://cdn.minloans.com.ng/min-dash/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- Select2 -->
<script src="https://cdn.minloans.com.ng/min-dash/plugins/select2/js/select2.full.min.js"></script>
<!-- Bootstrap4 Duallistbox -->
<script src="https://cdn.minloans.com.ng/min-dash/plugins/bootstrap4-duallistbox/jquery.bootstrap-duallistbox.min.js"></script>
<!-- InputMask -->
<script src="https://cdn.minloans.com.ng/min-dash/plugins/moment/moment.min.js"></script>
<script src="https://cdn.minloans.com.ng/min-dash/plugins/inputmask/min/jquery.inputmask.bundle.min.js"></script>
<!-- date-range-picker -->
<script src="https://cdn.minloans.com.ng/min-dash/plugins/daterangepicker/daterangepicker.js"></script>
<!-- bootstrap color picker -->
<script src="https://cdn.minloans.com.ng/min-dash/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="https://cdn.minloans.com.ng/min-dash/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Bootstrap Switch -->
<script src="https://cdn.minloans.com.ng/min-dash/plugins/bootstrap-switch/js/bootstrap-switch.min.js"></script>
<!-- Page script -->
<!-- jquery-validation -->
<script src="https://cdn.minloans.com.ng/min-dash/plugins/jquery-validation/jquery.validate.min.js"></script>
<script src="https://cdn.minloans.com.ng/min-dash/plugins/jquery-validation/additional-methods.min.js"></script>
<!-- AdminLTE App -->
<script src="https://cdn.minloans.com.ng/min-dash/dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="https://cdn.minloans.com.ng/min-dash/dist/js/demo.js"></script>
<!-- page script -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
<script>
  $(function () {
    //Initialize Select2 Elements
    $('.select2').select2();

    //Initialize Select2 Elements
    $('.select2bs4').select2({
      theme: 'bootstrap4'
    });

    //Datemask dd/mm/yyyy
    $('#datemask').inputmask('dd/mm/yyyy', { 'placeholder': 'dd/mm/yyyy' });
    //Datemask2 mm/dd/yyyy
    $('#datemask2').inputmask('mm/dd/yyyy', { 'placeholder': 'mm/dd/yyyy' });
    //Money Euro
    $('[data-mask]').inputmask();

    $('input[name="birthday"]').daterangepicker({
        singleDatePicker: true,
        showDropdowns: true,
        minYear: 1910,
        maxYear: parseInt(moment().format('YYYY'),10),
        locale: {
            format: 'YYYY-MM-DD'
        }
       }, function(start, end, label) {
        var years = moment().diff(start, 'years');
    });

    //Date range picker
    $('#reservation').daterangepicker();
    //Date range picker with time picker
    $('#reservationtime').daterangepicker({
      timePicker: true,
      timePickerIncrement: 30,
      locale: {
        format: 'MM/DD/YYYY hh:mm A'
      }
    });
    //Date range as a button
    $('#daterange-btn').daterangepicker(
      {
        ranges   : {
          'Today'       : [moment(), moment()],
          'Yesterday'   : [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
          'Last 7 Days' : [moment().subtract(6, 'days'), moment()],
          'Last 30 Days': [moment().subtract(29, 'days'), moment()],
          'This Month'  : [moment().startOf('month'), moment().endOf('month')],
          'Last Month'  : [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
        },
        startDate: moment().subtract(29, 'days'),
        endDate  : moment()
      },
      function (start, end) {
        $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'))
      }
    );

    //Timepicker
    $('#timepicker').datetimepicker({
      format: 'LT'
    });

    //Bootstrap Duallistbox
    $('.duallistbox').bootstrapDualListbox();

    //Colorpicker
    $('.my-colorpicker1').colorpicker();
    //color picker with addon
    $('.my-colorpicker2').colorpicker();

    $('.my-colorpicker2').on('colorpickerChange', function(event) {
      $('.my-colorpicker2 .fa-square').css('color', event.color.toString());
    });

    $("input[data-bootstrap-switch]").each(function(){
      $(this).bootstrapSwitch('state', $(this).prop('checked'));
    });

    $("#country").change(function () {
        const currentCountry = $(this).val();
        $('#state').val("Enter A Corresponding State To The Country: " + currentCountry).change(function () {
            $("#lga").val("Enter A Corresponding LGA To The Country: " + $(this).val())
        })
    });

    // Quick Image Upload For Borrower
    let imgPreview = document.getElementById('borrowerImage');

    {% if request.user.profile.borrower.bank %}
        let imgFileUpload = document.getElementById('uploadPortal');
        imgFileUpload.addEventListener('change', function (event) {
            let fileImage = event.target.files[0];
            let formData = new FormData();
            formData.append('file', fileImage);
            formData.append('upload_preset', '{{ cloudinary_upload_preset|safe }}');
            const titleMessage = $.parseHTML('<i class=\'fa fa-spin fa-spinner\'></i> Uploading..');

            // pop up toast alert
            $(document).Toasts('create', {
                class: 'bg-info',
                title:  titleMessage,
                subtitle: 'Uploading Image To Amju',
                body: 'Please wait a while, as we perform your upload!'
              });

              axios({
                  url: '{{ cloudinary_url|safe }}',
                  method: 'POST',
                  headers: {
                      'Content-Type': '.application/x-www-form-url-encoded'
                  },
                  data: formData
              }).then(function (response) {
                  console.log(response);
                  if (response.status == 200) {
                      imgPreview.src = response.data.secure_url;
                      // pop up toast alert
                      $(document).Toasts('create', {
                        class: 'bg-success',
                        title: 'Success!',
                        subtitle: 'Upload Success!',
                        body: 'Image Upload Successful'
                      });
                      // Send image url to server
                      {% include 'csrf_ajax/csrf_ajax_token.js' %}
                      $.ajax({
                            method: 'POST',
                            url: "/account/profile/upload/",
                            data: {"imageUrl": response.data.secure_url},
                            contentType: 'application/x-www-form-urlencoded',

                            success: function (data) {
                                $(document).Toasts('create', {
                                    class: 'bg-success',
                                    autohide: true,
                                    delay: 750,
                                    title: 'Server Updated Successfully!',
                                    subtitle: 'Image Uploaded',
                                    body: '' + data.message
                                });
                                location.reload(); // location.reload(true) is deprecated!
                            }, error: function (error) {
                                $(document).Toasts('create', {
                                    class: 'bg-danger',
                                    autohide: true,
                                    delay: 750,
                                    title: 'Error!',
                                    subtitle: '',
                                    body: 'An Error Occurred!'
                                });
                            }
                        });
                  }
              }).catch(function (error) {
                  $(document).Toasts('create', {
                    class: 'bg-danger',
                    title: 'Failed!',
                    subtitle: 'An Error Occurred',
                    body: 'An Error Occurred During Upload'
                  });
              });
          });
    {% else %}
        let imgFileUploadNew = document.getElementById('uploadPortalNew');
        imgFileUploadNew.addEventListener('change', function (event) {
            let fileImage = event.target.files[0];
            let formData = new FormData();
            formData.append('file', fileImage);
            formData.append('upload_preset', '{{ cloudinary_upload_preset|safe }}');
            const titleMessage = $.parseHTML('<i class=\'fa fa-spin fa-spinner\'></i> Uploading..');

            // pop up toast alert
            $(document).Toasts('create', {
                class: 'bg-info',
                title:  titleMessage,
                subtitle: 'Uploading Image To Amju',
                body: 'Please wait a while, as we perform your upload!'
              });

              axios({
                  url: '{{ cloudinary_url|safe }}',
                  method: 'POST',
                  headers: {
                      'Content-Type': '.application/x-www-form-url-encoded'
                  },
                  data: formData
              }).then(function (response) {
                  console.log(response);
                  if (response.status == 200) {
                      imgPreview.src = response.data.secure_url;
                      // pop up toast alert
                      $(document).Toasts('create', {
                        class: 'bg-success',
                        title: 'Success!',
                        subtitle: 'Upload Success!',
                        body: 'Image Upload Successful'
                      });
                      // Send image url to server
                      {% include 'csrf_ajax/csrf_ajax_token.js' %}
                      $.ajax({
                            method: 'POST',
                            url: "/account/profile/upload/",
                            data: {"imageUrl": response.data.secure_url},
                            contentType: 'application/x-www-form-urlencoded',

                            success: function (data) {
                                $(document).Toasts('create', {
                                    class: 'bg-success',
                                    autohide: true,
                                    delay: 750,
                                    title: 'Server Updated Successfully!',
                                    subtitle: 'Image Uploaded',
                                    body: '' + data.message
                                });
                                location.reload(); // location.reload(true) is deprecated!
                            }, error: function (error) {
                                $(document).Toasts('create', {
                                    class: 'bg-danger',
                                    autohide: true,
                                    delay: 750,
                                    title: 'Error!',
                                    subtitle: '',
                                    body: 'An Error Occurred!'
                                });
                            }
                        });
                  }
              }).catch(function (error) {
                  $(document).Toasts('create', {
                    class: 'bg-danger',
                    title: 'Failed!',
                    subtitle: 'An Error Occurred',
                    body: 'An Error Occurred During Upload'
                  });
              });
          });
    {% endif %}


    // Process and Initialize Submit system
    let borrowerForm = $('.addRequestBorrowerForm');
    let borrowerFormMethod = borrowerForm.attr('method');
    let borrowerFormEndpoint = borrowerForm.attr('action');

    function displaySubmitting(submitBtn, defaultText, doSubmit) {
        if (doSubmit) {
            submitBtn.addClass("disabled");
            submitBtn.html("<i class='fa fa-spin fa-spinner'></i> Completing..");
        } else {
            submitBtn.removeClass("disabled");
            submitBtn.add(defaultText);
        }
    }

    let borrowerFormSubmitBtn = borrowerForm.find("[type='submit']");
    let borrowerFormSubmitBtnText = borrowerFormSubmitBtn.text();

    borrowerForm.submit(function (event) {
        event.preventDefault();
        {% include 'csrf_ajax/csrf_ajax_token.js' %}

        const borrowerNewFormData = {
            "title":$('#title').val(),
            "firstName":$('#first_name').val(),
            "lastName":$('#last_name').val(),
            "gender":$('#gender').val(),
            "landPhone":$('#landline').val(),
            "businessName":$('#business_name').val(),
            "workingStatus":$('#working_status').val(),
            "unique_identifier":$('#unique_identifier').val(),
            "bank":$('#bank_codes').val(),
            "accountNumber":$('#account_number').val(),
            "bvn":$('#bvn').val(),
            "cardNumber":$("#card-digits").val(),
            "expiryMonth":$("#expiry-month").val(),
            "expiryYear":$("#expiry-year").val(),
            "cvv":$("#cvv").val(),
            "dateOfBirth":$('#date_of_birth').val(),
            "address":$('#address').val(),
            "country":$('#country').val(),
            "state":$('#state').val(),
            "lga":$('#lga').val()
        };

        console.log(borrowerNewFormData);

        displaySubmitting(borrowerFormSubmitBtn, "", true);

        $.ajax({
            method: borrowerFormMethod,
            url: borrowerFormEndpoint,
            data: borrowerNewFormData,
            contentType: 'application/x-www-form-urlencoded',

            success: function (data) {
                borrowerForm[0].reset();
                $(document).Toasts('create', {
                    class: 'bg-success',
                    autohide: true,
                    delay: 750,
                    title: 'Created!',
                    subtitle: 'Success',
                    body: 'Account Created Successfully!' //+ data.message
                });
                setTimeout(function () {
                    window.location.replace("/account/profile/{{request.user.profile.slug}}/borrower-create/");
                }, 5000);
            }, error: function (error) {
                borrowerForm[0].reset();
                $(document).Toasts('create', {
                    class: 'bg-danger',
                    autohide: true,
                    delay: 750,
                    title: 'Error!',
                    subtitle: '',
                    body: 'An Error Occurred!'
                });
                displaySubmitting(borrowerFormSubmitBtn, borrowerFormSubmitBtnText, false);
            }
        })
    })

  })
</script>
<script type="text/javascript">
$(document).ready(function () {
  $.validator.setDefaults({
    submitHandler: function () {
      console.log( "submitted clicked!" );
    }
  });
  $('.addBorrowerForm').validate({
    rules: {
      email: {
        required: true,
        email: true,
      },
      password: {
        required: true,
        minlength: 5
      },
      terms: {
        required: true
      },
    },
    messages: {
      email: {
        required: "Please enter a email address",
        email: "Please enter a vaild email address"
      },
      password: {
        required: "Please provide a password",
        minlength: "Your password must be at least 5 characters long"
      },
      terms: "Please accept our terms"
    },
    errorElement: 'span',
    errorPlacement: function (error, element) {
      error.addClass('invalid-feedback');
      element.closest('.form-group').append(error);
    },
    highlight: function (element, errorClass, validClass) {
      $(element).addClass('is-invalid');
    },
    unhighlight: function (element, errorClass, validClass) {
      $(element).removeClass('is-invalid');
    }
  });
});
</script>


</body>

</html>